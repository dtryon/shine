<!DOCTYPE html>
<html>
<head>
	<title>shine</title>
	<script src="/components/react/react.js"></script>
	<script src="/components/react/JSXTransformer.js"></script>
	<script type="text/jsx" src="/views/file-uploader/file-uploader.js"></script>
	<script>
		window.onload = function() {

			var originX = 0;
			var originY = 0;
			var paint;
			var canvas = document.getElementById('canvas');
			context = canvas.getContext('2d');

			function redraw(x, y){
				
				context.clearRect(0, 0, context.canvas.width, context.canvas.height);

				context.strokeStyle = "#000000";
				context.lineWidth = 2;

				if (x && y) {

					context.beginPath();
					context.moveTo(originX, originY);
					context.lineTo(originX, y);
					context.closePath();
					context.stroke();
					context.lineTo(x, originY);
					context.closePath();
					context.stroke();

					context.beginPath();
					context.moveTo(x, y);
					context.lineTo(originX, y);
					context.closePath();
					context.stroke();
					context.lineTo(x, originY);
					context.closePath();
					context.stroke();
				}


			}

			canvas.addEventListener('mousedown', function(e){
				originX = e.pageX - this.offsetLeft;
				originY = e.pageY - this.offsetTop;

				paint = true;

				redraw();
			});

			canvas.addEventListener('mousemove', function(e) {
				if(paint) {

					var mouseX = e.pageX - this.offsetLeft;
					var mouseY = e.pageY - this.offsetTop;

					redraw(mouseX, mouseY);
				}
			});

			canvas.addEventListener('mouseup', function(e) {

				paint = false;
			});

			canvas.addEventListener('mouseleave', function(e) {

				paint = false;
			});


		};
	</script>
	<style>
		#canvas {
			border-style: solid;
    		border-width: 5px;
		}
	</style>
</head>
<body>
	<div>
		<h1>Image Uploader Test:</h1>
	</div>
	<div id="file-uploader"></div>
	<canvas id="canvas" width="490" border="1" height="220"></canvas>
</body>
</html>